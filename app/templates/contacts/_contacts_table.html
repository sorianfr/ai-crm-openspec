{% from "_ui/card.html" import card %}
{% if contacts %}
{% call card("Contacts") %}
<table class="min-w-full divide-y divide-gray-200">
  <thead class="bg-gray-50">
    <tr>
      <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Name</th>
      <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Email</th>
      <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Phone</th>
      <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Company</th>
      <th scope="col" class="px-4 py-2"></th>
      <th scope="col" class="px-4 py-2"></th>
    </tr>
  </thead>
  <tbody class="bg-white divide-y divide-gray-200">
    {% for contact in contacts %}
    <tr id="contact-{{ contact.id }}">
      <td class="px-4 py-3 text-sm text-gray-900">{{ contact.full_name }}</td>
      <td class="px-4 py-3 text-sm text-gray-600">{{ contact.email or "" }}</td>
      <td class="px-4 py-3 text-sm text-gray-600">{{ contact.phone or "" }}</td>
      <td class="px-4 py-3 text-sm text-gray-600">{{ contact.company or "" }}</td>
      <td class="px-4 py-3">
        {% set url = "/contacts/" ~ contact.id ~ "/edit" %}{% set label = "Edit" %}{% set style = "secondary" %}
        {% include "_ui/button.html" %}
      </td>
      <td class="px-4 py-3">
        {% set url = none %}{% set type = "button" %}{% set label = "Delete" %}{% set style = "danger" %}
        {% set hx_post = "/contacts/" ~ contact.id ~ "/delete" %}{% set hx_target = "#contact-" ~ contact.id %}{% set hx_swap = "outerHTML" %}{% set hx_confirm = "Delete this contact?" %}
        {% include "_ui/button.html" %}
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endcall %}
{% else %}
{% set message = "No contacts yet." %}{% set action_url = "/contacts/new" %}{% set action_label = "Add one" %}
{% include "_ui/empty_state.html" %}
{% endif %}
