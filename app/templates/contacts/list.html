{% extends "base.html" %}
{% from "_ui/card.html" import card %}

{% block title %}Contacts - Python CRM{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold text-gray-900 mb-4">Contacts</h1>
<div class="mb-4">
  {% set url = "/contacts/new" %}{% set label = "New contact" %}{% set style = "primary" %}
  {% include "_ui/button.html" %}
</div>

{% call card("Filters") %}
<form method="get" action="/contacts" hx-get="/contacts" hx-target="#contacts-results" hx-swap="innerHTML">
  <div class="mb-4">
    <label for="q" class="block text-sm font-medium text-gray-700 mb-1">Search</label>
    <input type="text" id="q" name="q" value="{{ q }}" placeholder="Name, email, or company" class="block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm" />
  </div>
  <div class="mb-4 flex gap-4 items-center">
    <label class="inline-flex items-center">
      <input type="checkbox" name="has_email" value="true" {% if has_email %}checked{% endif %} class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" />
      <span class="ml-2 text-sm text-gray-700">Has email</span>
    </label>
    <label class="inline-flex items-center">
      <input type="checkbox" name="has_phone" value="true" {% if has_phone %}checked{% endif %} class="rounded border-gray-300 text-blue-600 focus:ring-blue-500" />
      <span class="ml-2 text-sm text-gray-700">Has phone</span>
    </label>
  </div>
  <div class="flex gap-2">
    {% set url = none %}{% set type = "submit" %}{% set label = "Apply filters" %}{% set style = "primary" %}
    {% include "_ui/button.html" %}
    {% set url = "/contacts" %}{% set label = "Clear" %}{% set style = "secondary" %}
    {% include "_ui/button.html" %}
  </div>
</form>
{% endcall %}

<div id="contacts-results" class="mt-6">
  {% include "contacts/_contacts_table.html" %}
</div>
{% endblock %}
