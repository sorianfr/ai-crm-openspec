{% extends "base.html" %}
{% from "_ui/card.html" import card %}

{% block title %}Companies - Python CRM{% endblock %}

{% block content %}
<h1 class="text-2xl font-bold text-gray-900 mb-4">Companies</h1>
<div class="mb-4">
  {% set url = "/companies/new" %}{% set label = "New company" %}{% set style = "primary" %}
  {% include "_ui/button.html" %}
</div>

{% if companies %}
{% call card("Companies") %}
<table class="min-w-full divide-y divide-gray-200">
  <thead class="bg-gray-50">
    <tr>
      <th scope="col" class="px-4 py-2 text-left text-xs font-medium text-gray-500 uppercase">Name</th>
      <th scope="col" class="px-4 py-2"></th>
      <th scope="col" class="px-4 py-2"></th>
    </tr>
  </thead>
  <tbody class="bg-white divide-y divide-gray-200">
    {% for company in companies %}
    <tr id="company-{{ company.id }}">
      <td class="px-4 py-3 text-sm text-gray-900">{{ company.name }}</td>
      <td class="px-4 py-3">
        {% set url = "/companies/" ~ company.id ~ "/edit" %}{% set label = "Edit" %}{% set style = "secondary" %}
        {% include "_ui/button.html" %}
      </td>
      <td class="px-4 py-3">
        <form method="post" action="/companies/{{ company.id }}/delete" class="inline">
          {% set url = none %}{% set type = "submit" %}{% set label = "Delete" %}{% set style = "danger" %}
          {% include "_ui/button.html" %}
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endcall %}
{% else %}
{% set message = "No companies yet." %}{% set action_url = "/companies/new" %}{% set action_label = "Add one" %}
{% include "_ui/empty_state.html" %}
{% endif %}
{% endblock %}
